"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[61],{61:(e,s,n)=>{n.r(s),n.d(s,{default:()=>a});var l=n(43),t=n(977),i=(n(213),n(579));function r(e){let{jobs:s=[]}=e;const[n,r]=(0,l.useState)([]),[a,o]=(0,l.useState)([]),[c,d]=(0,l.useState)([]),[u,m]=(0,l.useState)({}),p=e=>{let{logo:s,letter:l}=e;return s&&!n.includes(s)?(0,i.jsx)("img",{src:s,alt:"Company Logo",className:"company-logo",onError:()=>r((e=>[...e,s]))}):(0,i.jsx)("div",{className:"fallback-logo",children:l})};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Total Results:"})," ",s.length]}),0===s.length&&(0,i.jsx)("p",{style:{color:"#666",fontStyle:"italic"},children:"No results found"}),Array.isArray(s)&&s.map((e=>{var s,n,l;const r=null!==(s=e.id)&&void 0!==s?s:e.job_id;return(0,i.jsxs)("div",{className:"job-card",children:[(0,i.jsxs)("div",{className:"logo-title-container",children:[e.company_url?(0,i.jsx)("a",{href:e.company_url,target:"_blank",rel:"noreferrer",style:{textDecoration:"none",color:"inherit"},children:(0,i.jsx)(p,{logo:e.company_logo,letter:(null===(n=e.company)||void 0===n?void 0:n[0])||"?"})}):(0,i.jsx)(p,{logo:e.company_logo,letter:(null===(l=e.company)||void 0===l?void 0:l[0])||"?"}),(0,i.jsx)("h2",{className:"job-title",children:e.title})]}),e.company_url?(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Company: "}),(0,i.jsx)("a",{href:e.company_url,target:"_blank",rel:"noreferrer",style:{textDecoration:"none",color:"inherit"},children:e.company})]}):(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Company:"})," ",e.company]}),e.company_industry&&(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Industry:"})," ",e.company_industry]}),e.company_employee_count_range&&(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Company Size:"})," ",e.company_employee_count_range]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Location:"})," ","Remote"===e.location||e.location&&e.location.includes(",")?e.location:`${e.location||"Unknown"}, ${e.state_code||""}`]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Date Posted:"})," ",e.date_posted]}),e.salary&&e.salary.length>1&&(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Salary:"})," ",e.salary]}),e.description?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("p",{children:(0,i.jsx)("strong",{children:"Description:"})}),(0,i.jsx)("span",{className:"more-link",onClick:()=>{o((e=>e.includes(r)?e.filter((e=>e!==r)):[...e,r]))},children:a.includes(r)?"Show Less":"Read full description"}),(0,i.jsx)("div",{className:"full-description",style:{display:a.includes(r)?"block":"none"},children:(0,i.jsx)("div",{dangerouslySetInnerHTML:{__html:t.A.sanitize(e.description)}})})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("p",{children:(0,i.jsx)("strong",{children:"Description:"})}),(0,i.jsx)("span",{className:"more-link",onClick:()=>{a.includes(r)?(o((e=>e.filter((e=>e!==r)))),d((e=>e.filter((e=>e!==r))))):r in u?o((e=>[...e,r])):(d((e=>[...e,r])),fetch(`/api/get_description/${r}`).then((e=>e.json())).then((e=>{const s="success"===(null===e||void 0===e?void 0:e.status)?e.html:"<p>Could not load description.</p>";m((e=>({...e,[r]:t.A.sanitize(s)}))),o((e=>[...e,r]))})).catch((()=>{m((e=>({...e,[r]:"<p>Error loading description.</p>"}))),o((e=>[...e,r]))})).finally((()=>{d((e=>e.filter((e=>e!==r))))})))},children:c.includes(r)?a.includes(r)?"Show Less":(0,i.jsx)("div",{className:"spinner"}):"Read full description"}),(0,i.jsx)("div",{className:"full-description",style:{display:a.includes(r)?"block":"none"},children:(0,i.jsx)("div",{dangerouslySetInnerHTML:{__html:u[r]||""}})})]}),(0,i.jsx)("p",{children:(0,i.jsx)("strong",{children:(0,i.jsx)("a",{href:e.final_url,target:"_blank",rel:"noreferrer",children:"Apply Here"})})}),e.recruiter_emails&&Array.isArray(e.recruiter_emails)&&(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Recruiter Emails:"})," ",e.recruiter_emails.join(", ")]})]},r)}))]})}function a(e){var s,n;let{admin:t,stats:a}=e;const[o,c]=(0,l.useState)(""),[d,u]=(0,l.useState)(!1),[m,p]=(0,l.useState)(0),[h,j]=(0,l.useState)(null),[x,f]=(0,l.useState)(!1),[v,y]=(0,l.useState)(null),[g,_]=(0,l.useState)(""),[N,w]=(0,l.useState)("applied"),b=(0,l.useRef)(null),S=(0,l.useMemo)((()=>{var e;return(null!==(e=null===a||void 0===a?void 0:a.users_list)&&void 0!==e?e:[]).map((e=>{if("string"===typeof e)return{email:e,name:""};return{email:e.email||e.user_email||"",name:e.name||[e.first_name,e.last_name].filter(Boolean).join(" ")||""}})).filter((e=>e.email))}),[a]),k=(0,l.useMemo)((()=>{const e=o.trim().toLowerCase();return e?S.filter((s=>s.email.toLowerCase().includes(e)||s.name&&s.name.toLowerCase().includes(e))).slice(0,8):S.slice(0,8)}),[S,o]);function C(e){j(e),u(!1),y(null),_("")}(0,l.useEffect)((()=>{function e(e){b.current&&(b.current.contains(e.target)||u(!1))}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)}),[]),(0,l.useEffect)((()=>{if(!h)return;const e=new AbortController;return(async()=>{try{f(!0),_(""),y(null);const s=await fetch("/api/get_user_from_admin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:h}),signal:e.signal});if(!s.ok){const e=await s.text().catch((()=>""));throw new Error(e||`Request failed (${s.status})`)}const n=await s.json();y(n)}catch(s){"AbortError"!==s.name&&_(s.message||"Failed to fetch user data.")}finally{f(!1)}})(),()=>e.abort()}),[h]);null===v||void 0===v||v.user;return(0,i.jsxs)("div",{className:"student-view",children:[(0,i.jsxs)("h1",{className:"student-view-title",children:[(0,i.jsx)("span",{style:{color:"black"},children:"Student View:"})," ",(0,i.jsx)("span",{style:{color:"var(--primary-color)"},children:null===t||void 0===t?void 0:t.school_fullname})]}),(0,i.jsxs)("div",{ref:b,className:"student-view-container",children:[(0,i.jsxs)("div",{className:"student-search-box",children:[(0,i.jsx)("label",{htmlFor:"student-search",className:"student-label",children:"Search For Student:"}),(0,i.jsxs)("div",{className:"student-combobox",children:[(0,i.jsx)("input",{id:"student-search",type:"text",value:o,onChange:e=>{c(e.target.value),u(!0),p(0)},onFocus:()=>u(!0),onKeyDown:function(e){if(d||"ArrowDown"!==e.key&&"ArrowUp"!==e.key){if(d)if("ArrowDown"===e.key)e.preventDefault(),p((e=>Math.min(e+1,k.length-1)));else if("ArrowUp"===e.key)e.preventDefault(),p((e=>Math.max(e-1,0)));else if("Enter"===e.key){e.preventDefault();const s=k[m];s&&C(s.email)}else"Escape"===e.key&&u(!1)}else u(!0)},placeholder:"Type email...",autoComplete:"off",className:"student-input"}),d&&k.length>0&&(0,i.jsx)("ul",{className:"student-dropdown",role:"listbox",children:k.map(((e,s)=>(0,i.jsxs)("li",{role:"option","aria-selected":s===m,className:"student-option "+(s===m?"highlighted":""),onMouseEnter:()=>p(s),onMouseDown:e=>e.preventDefault(),onClick:()=>C(e.email),children:[(0,i.jsxs)("div",{className:"student-option-main",children:[(0,i.jsx)("div",{className:"student-option-email",children:e.email}),e.name&&(0,i.jsx)("div",{className:"student-option-name",children:e.name})]}),(0,i.jsx)("span",{className:"student-option-select",children:"Select"})]},`${e.email}-${s}`)))})]})]}),(0,i.jsxs)("div",{className:"student-selected",children:[(0,i.jsx)("div",{className:"student-label",children:"Selected Student:"}),(0,i.jsx)("div",{className:"student-selected-email "+(h?"":"none"),children:null!==v&&void 0!==v&&v.user?`${v.user.first_name} ${v.user.last_name} (${v.user.email})`:h||"None Selected"})]})]}),(0,i.jsxs)("div",{className:"filter-buttons-inline",children:[(0,i.jsx)("button",{className:"applied"===N?"selected":"",onClick:()=>w("applied"),children:"Applied To"}),(0,i.jsx)("button",{className:"favorites"===N?"selected":"",onClick:()=>w("favorites"),children:"Favorites"})]}),(0,i.jsx)("div",{style:{marginTop:12},children:x?(0,i.jsx)("div",{className:"spinner-container",children:(0,i.jsx)("div",{className:"spinner-aw"})}):(0,i.jsx)(r,{jobs:"favorites"===N?(null===v||void 0===v||null===(s=v.user)||void 0===s?void 0:s.favorites)||[]:(null===v||void 0===v||null===(n=v.user)||void 0===n?void 0:n.applied_to)||[]})})]})}}}]);
//# sourceMappingURL=61.009d8094.chunk.js.map