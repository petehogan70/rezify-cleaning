{"version":3,"file":"static/js/61.009d8094.chunk.js","mappings":"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","sources":["objects/AdminJobsList.js","objects/StudentView.js"],"sourcesContent":["import React, { useState } from 'react';\nimport DOMPurify from 'dompurify';\nimport '../styles/AdminJobsList.css';\n\nexport default function AdminJobsList({ jobs = [] }) {\n    const [loadFails, setLoadFails] = useState([]);     // logos that failed to load\n    const [showDesc, setShowDesc] = useState([]);       // job ids with full desc shown\n    const [preDesc, setPreDesc] = useState([]);         // job ids currently fetching\n    const [fullDesc, setFullDesc] = useState({});       // { [jobId]: sanitized HTML }\n\n    const ImageWithFailsafe = ({ logo, letter }) => {\n        if (logo && !loadFails.includes(logo)) {\n            return (\n                <img\n                    src={logo}\n                    alt=\"Company Logo\"\n                    className=\"company-logo\"\n                    onError={() => setLoadFails(prev => [...prev, logo])}\n                />\n            );\n        }\n        return <div className=\"fallback-logo\">{letter}</div>;\n    };\n\n    return (\n        <>\n            {/* Results header */}\n            <p><strong>Total Results:</strong> {jobs.length}</p>\n\n            {/* Empty state */}\n            {jobs.length === 0 && (\n                <p style={{ color: '#666', fontStyle: 'italic' }}>No results found</p>\n            )}\n\n            {Array.isArray(jobs) && jobs.map((job) => {\n                const jobId = job.id ?? job.job_id;\n\n                return (\n\n                    <div key={jobId} className=\"job-card\">\n                        {/* Top: logo + title */}\n                        <div className=\"logo-title-container\">\n                            {job.company_url ? (\n                                <a\n                                    href={job.company_url}\n                                    target=\"_blank\"\n                                    rel=\"noreferrer\"\n                                    style={{ textDecoration: 'none', color: 'inherit' }}\n                                >\n                                    <ImageWithFailsafe\n                                        logo={job.company_logo}\n                                        letter={job.company?.[0] || '?'}\n                                    />\n                                </a>\n                            ) : (\n                                <ImageWithFailsafe\n                                    logo={job.company_logo}\n                                    letter={job.company?.[0] || '?'}\n                                />\n                            )}\n\n                            <h2 className=\"job-title\">{job.title}</h2>\n                        </div>\n\n                        {/* Company / meta */}\n                        {job.company_url ? (\n                            <p>\n                                <strong>Company: </strong>\n                                <a\n                                    href={job.company_url}\n                                    target=\"_blank\"\n                                    rel=\"noreferrer\"\n                                    style={{ textDecoration: 'none', color: 'inherit' }}\n                                >\n                                    {job.company}\n                                </a>\n                            </p>\n                        ) : (\n                            <p>\n                                <strong>Company:</strong> {job.company}\n                            </p>\n                        )}\n\n                        {job.company_industry && (\n                            <p>\n                                <strong>Industry:</strong> {job.company_industry}\n                            </p>\n                        )}\n\n                        {job.company_employee_count_range && (\n                            <p>\n                                <strong>Company Size:</strong> {job.company_employee_count_range}\n                            </p>\n                        )}\n\n                        <p>\n                            <strong>Location:</strong>{' '}\n                            {job.location === 'Remote'\n                                ? job.location\n                                : job.location && job.location.includes(',')\n                                ? job.location\n                                : `${job.location || 'Unknown'}, ${job.state_code || ''}`}\n                        </p>\n\n                        <p>\n                            <strong>Date Posted:</strong> {job.date_posted}\n                        </p>\n\n                        {job.salary && job.salary.length > 1 && (\n                            <p>\n                                <strong>Salary:</strong> {job.salary}\n                            </p>\n                        )}\n\n                        {/* Description (toggle + content). If missing, fetch from backend. */}\n                        {job.description ? (\n                            <>\n                                <p><strong>Description:</strong></p>\n                                <span\n                                    className=\"more-link\"\n                                    onClick={() => {\n                                        setShowDesc(prev =>\n                                            prev.includes(jobId)\n                                                ? prev.filter(id => id !== jobId)\n                                                : [...prev, jobId]\n                                        );\n                                    }}\n                                >\n                                    {showDesc.includes(jobId) ? 'Show Less' : 'Read full description'}\n                                </span>\n                                <div\n                                    className=\"full-description\"\n                                    style={{ display: showDesc.includes(jobId) ? 'block' : 'none' }}\n                                >\n                                    <div\n                                        dangerouslySetInnerHTML={{\n                                            __html: DOMPurify.sanitize(job.description)\n                                        }}\n                                    />\n                                </div>\n                            </>\n                        ) : (\n                            <>\n                                <p><strong>Description:</strong></p>\n                                <span\n                                    className=\"more-link\"\n                                    onClick={() => {\n                                        if (!showDesc.includes(jobId)) {\n                                            if (!(jobId in fullDesc)) {\n                                                setPreDesc(prev => [...prev, jobId]);\n                                                fetch(`/api/get_description/${jobId}`)\n                                                    .then(r => r.json())\n                                                    .then(data => {\n                                                        const html =\n                                                            data?.status === 'success'\n                                                                ? data.html\n                                                                : '<p>Could not load description.</p>';\n                                                        setFullDesc(prev => ({\n                                                            ...prev,\n                                                            [jobId]: DOMPurify.sanitize(html)\n                                                        }));\n                                                        setShowDesc(prev => [...prev, jobId]);\n                                                    })\n                                                    .catch(() => {\n                                                        setFullDesc(prev => ({\n                                                            ...prev,\n                                                            [jobId]: '<p>Error loading description.</p>'\n                                                        }));\n                                                        setShowDesc(prev => [...prev, jobId]);\n                                                    })\n                                                    .finally(() => {\n                                                        setPreDesc(prev => prev.filter(id => id !== jobId));\n                                                    });\n                                            } else {\n                                                setShowDesc(prev => [...prev, jobId]);\n                                            }\n                                        } else {\n                                            setShowDesc(prev => prev.filter(id => id !== jobId));\n                                            setPreDesc(prev => prev.filter(id => id !== jobId));\n                                        }\n                                    }}\n                                >\n                                    {preDesc.includes(jobId)\n                                        ? (showDesc.includes(jobId) ? 'Show Less' : <div className=\"spinner\" />)\n                                        : 'Read full description'}\n                                </span>\n                                <div\n                                    className=\"full-description\"\n                                    style={{ display: showDesc.includes(jobId) ? 'block' : 'none' }}\n                                >\n                                    <div\n                                        dangerouslySetInnerHTML={{\n                                            __html: fullDesc[jobId] || ''\n                                        }}\n                                    />\n                                </div>\n                            </>\n                        )}\n\n                        {/* Apply link */}\n                        <p>\n                            <strong>\n                                <a href={job.final_url} target=\"_blank\" rel=\"noreferrer\">\n                                    Apply Here\n                                </a>\n                            </strong>\n                        </p>\n\n                        {/* Optional recruiter emails */}\n                        {job.recruiter_emails && Array.isArray(job.recruiter_emails) && (\n                            <p>\n                                <strong>Recruiter Emails:</strong> {job.recruiter_emails.join(', ')}\n                            </p>\n                        )}\n                    </div>\n                );\n            })}\n        </>\n    );\n}\n","import { useEffect, useMemo, useRef, useState } from 'react';\nimport AdminJobsList from './AdminJobsList';\n\nexport default function StudentView({ admin, stats }) {\n    const [query, setQuery] = useState('');\n    const [isOpen, setIsOpen] = useState(false);\n    const [highlighted, setHighlighted] = useState(0);\n    const [selectedEmail, setSelectedEmail] = useState(null);\n    const [userDataLoading, setUserDataLoading] = useState(false);\n    const [userData, setUserData] = useState(null);\n    const [userDataError, setUserDataError] = useState('');\n    const [jobsTab, setJobsTab] = useState('applied'); // 'applied' | 'favorites'\n\n\n    const rootRef = useRef(null);\n\n    const users = useMemo(() => {\n        const raw = stats?.users_list ?? [];\n        return raw\n            .map((u) => {\n                if (typeof u === 'string') return { email: u, name: '' };\n                const email = u.email || u.user_email || '';\n                const name =\n                    u.name ||\n                    [u.first_name, u.last_name].filter(Boolean).join(' ') ||\n                    '';\n                return { email, name };\n            })\n            .filter((u) => u.email);\n    }, [stats]);\n\n    const filtered = useMemo(() => {\n        const q = query.trim().toLowerCase();\n        if (!q) return users.slice(0, 8);\n        return users\n            .filter(\n                (u) =>\n                    u.email.toLowerCase().includes(q) ||\n                    (u.name && u.name.toLowerCase().includes(q))\n            )\n            .slice(0, 8);\n    }, [users, query]);\n\n    useEffect(() => {\n        function onDocClick(e) {\n            if (!rootRef.current) return;\n            if (!rootRef.current.contains(e.target)) setIsOpen(false);\n        }\n        document.addEventListener('mousedown', onDocClick);\n        return () => document.removeEventListener('mousedown', onDocClick);\n    }, []);\n\n    function onKeyDown(e) {\n        if (!isOpen && (e.key === 'ArrowDown' || e.key === 'ArrowUp')) {\n            setIsOpen(true);\n            return;\n        }\n        if (!isOpen) return;\n\n        if (e.key === 'ArrowDown') {\n            e.preventDefault();\n            setHighlighted((i) => Math.min(i + 1, filtered.length - 1));\n        } else if (e.key === 'ArrowUp') {\n            e.preventDefault();\n            setHighlighted((i) => Math.max(i - 1, 0));\n        } else if (e.key === 'Enter') {\n            e.preventDefault();\n            const pick = filtered[highlighted];\n            if (pick) {\n                handleSelectEmail(pick.email);\n            }\n        } else if (e.key === 'Escape') {\n            setIsOpen(false);\n        }\n    }\n\n    function handleSelectEmail(email) {\n        setSelectedEmail(email);\n        setIsOpen(false);\n        setUserData(null);\n        setUserDataError('');\n    }\n\n    useEffect(() => {\n        if (!selectedEmail) return;\n\n        const ctrl = new AbortController();\n        (async () => {\n            try {\n                setUserDataLoading(true);\n                setUserDataError('');\n                setUserData(null);\n\n                const res = await fetch('/api/get_user_from_admin', {\n                    method: 'POST',\n                    headers: { 'Content-Type': 'application/json' },\n                    body: JSON.stringify({ email: selectedEmail }),\n                    signal: ctrl.signal,\n                });\n                if (!res.ok) {\n                    const text = await res.text().catch(() => '');\n                    throw new Error(text || `Request failed (${res.status})`);\n                }\n                const data = await res.json();\n                setUserData(data);\n            } catch (err) {\n                if (err.name !== 'AbortError') {\n                    setUserDataError(err.message || 'Failed to fetch user data.');\n                }\n            } finally {\n                setUserDataLoading(false);\n            }\n        })();\n\n        return () => ctrl.abort();\n    }, [selectedEmail]);\n\n    const currentUser = userData?.user;\n\n    return (\n        <div className=\"student-view\">\n            <h1 className=\"student-view-title\">\n                <span style={{ color: 'black' }}>Student View:</span>{' '}\n                <span style={{ color: 'var(--primary-color)' }}>\n                    {admin?.school_fullname}\n                </span>\n            </h1>\n\n            <div ref={rootRef} className=\"student-view-container\">\n                {/* Search area */}\n                <div className=\"student-search-box\">\n                    <label htmlFor=\"student-search\" className=\"student-label\">\n                        Search For Student:\n                    </label>\n\n                    {/* NEW: positioned wrapper */}\n                    <div className=\"student-combobox\">\n                        <input\n                            id=\"student-search\"\n                            type=\"text\"\n                            value={query}\n                            onChange={(e) => {\n                                setQuery(e.target.value);\n                                setIsOpen(true);\n                                setHighlighted(0);\n                            }}\n                            onFocus={() => setIsOpen(true)}\n                            onKeyDown={onKeyDown}\n                            placeholder=\"Type email...\"\n                            autoComplete=\"off\"\n                            className=\"student-input\"\n                        />\n\n                        {isOpen && filtered.length > 0 && (\n                            <ul className=\"student-dropdown\" role=\"listbox\">\n                                {filtered.map((u, idx) => (\n                                    <li\n                                        key={`${u.email}-${idx}`}\n                                        role=\"option\"\n                                        aria-selected={idx === highlighted}\n                                        className={`student-option ${idx === highlighted ? 'highlighted' : ''}`}\n                                        onMouseEnter={() => setHighlighted(idx)}\n                                        onMouseDown={(e) => e.preventDefault()}\n                                        onClick={() => handleSelectEmail(u.email)}\n                                    >\n                                        <div className=\"student-option-main\">\n                                            <div className=\"student-option-email\">{u.email}</div>\n                                            {u.name && <div className=\"student-option-name\">{u.name}</div>}\n                                        </div>\n                                        <span className=\"student-option-select\">Select</span>\n                                    </li>\n                                ))}\n                            </ul>\n                        )}\n                    </div>\n                </div>\n\n                {/* Selected student */}\n                <div className=\"student-selected\">\n                    <div className=\"student-label\">Selected Student:</div>\n                    <div\n                        className={`student-selected-email ${selectedEmail ? '' : 'none'}`}\n                    >\n                        {userData?.user\n                            ? `${userData.user.first_name} ${userData.user.last_name} (${userData.user.email})`\n                            : (selectedEmail || 'None Selected')}\n                    </div>\n                </div>\n            </div>\n\n                <div className=\"filter-buttons-inline\">\n                    <button\n                        className={jobsTab === 'applied' ? 'selected' : ''}\n                        onClick={() => setJobsTab('applied')}\n                    >\n                        Applied To\n                    </button>\n                    <button\n                        className={jobsTab === 'favorites' ? 'selected' : ''}\n                        onClick={() => setJobsTab('favorites')}\n                    >\n                        Favorites\n                    </button>\n                </div>\n\n\n                {/* Render jobs */}\n                <div style={{ marginTop: 12 }}>\n                    {userDataLoading ? (\n                        <div className=\"spinner-container\">\n                            <div className=\"spinner-aw\" />\n                        </div>\n                    ) : (\n                        <AdminJobsList\n                            jobs={\n                                jobsTab === 'favorites'\n                                    ? (userData?.user?.favorites || [])\n                                    : (userData?.user?.applied_to || [])\n                            }\n                        />\n                    )}\n                </div>\n\n            {/*\n            <div className=\"student-user-card\">\n                {userDataLoading && <div className=\"student-muted\">Loading user dataâ€¦</div>}\n                {!userDataLoading && userDataError && (\n                    <div className=\"student-error\">Error: {userDataError}</div>\n                )}\n                {!userDataLoading && !userDataError && userData && (\n                    <pre className=\"student-pretty-json\">\n            {JSON.stringify(userData, null, 2)}\n                    </pre>\n                )}\n                {!userDataLoading && !userDataError && !userData && selectedEmail && (\n                    <div className=\"student-muted\">No data returned for this user.</div>\n                )}\n            </div>\n            */}\n        </div>\n    );\n}\n"],"names":["AdminJobsList","_ref","jobs","loadFails","setLoadFails","useState","showDesc","setShowDesc","preDesc","setPreDesc","fullDesc","setFullDesc","ImageWithFailsafe","_ref2","logo","letter","includes","_jsx","src","alt","className","onError","prev","children","_jsxs","_Fragment","length","style","color","fontStyle","Array","isArray","map","job","_job$id","_job$company","_job$company2","jobId","id","job_id","company_url","href","target","rel","textDecoration","company_logo","company","title","company_industry","company_employee_count_range","location","state_code","date_posted","salary","description","onClick","filter","display","dangerouslySetInnerHTML","__html","DOMPurify","sanitize","fetch","then","r","json","data","html","status","catch","finally","final_url","recruiter_emails","join","StudentView","_userData$user","_userData$user2","admin","stats","query","setQuery","isOpen","setIsOpen","highlighted","setHighlighted","selectedEmail","setSelectedEmail","userDataLoading","setUserDataLoading","userData","setUserData","userDataError","setUserDataError","jobsTab","setJobsTab","rootRef","useRef","users","useMemo","_stats$users_list","users_list","u","email","name","user_email","first_name","last_name","Boolean","filtered","q","trim","toLowerCase","slice","handleSelectEmail","useEffect","onDocClick","e","current","contains","document","addEventListener","removeEventListener","ctrl","AbortController","res","method","headers","body","JSON","stringify","signal","ok","text","Error","err","message","abort","user","school_fullname","ref","htmlFor","type","value","onChange","onFocus","onKeyDown","key","preventDefault","i","Math","min","max","pick","placeholder","autoComplete","role","idx","onMouseEnter","onMouseDown","marginTop","favorites","applied_to"],"sourceRoot":""}